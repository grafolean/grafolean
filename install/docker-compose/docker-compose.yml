version: '2.1'
services:

  # This docker-compose.yml is used for building the docker images (grafolean and mosquitto-auth)

  db:
    image: postgres:9.6-alpine

  grafolean:
    image: grafolean/grafolean
    build:
      context: ../../
      dockerfile: install/docker-compose/Dockerfile
      args:
        - REACT_APP_BACKEND_ROOT_URL=/api

  mosquitto:
    # regular Mosquitto, but with auth plugin installed.
    image: grafolean/mosquitto
    build:
      context: ../mosquitto-auth/
      dockerfile: Dockerfile

networks:
  grafolean:
