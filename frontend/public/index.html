<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">

    <!--
      The Content-Security-Policy is set both through header (nginx config) and
      the META tag below. Note that the *intersection* of rules is used - action
      must be allowed by *both* sets to be valid.
      Also, 'report-uri' is not supported in META tags so we skip it here.

      When figuring out the correct set of rules it might come handy to have
      this "allow-all" rule:
        default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;

      This the currently used setting: (and reasons for it)
        default-src 'none';  // default policy - allow nothing unless explicitly allowed
        style-src 'self' 'unsafe-inline';  // with React some styles are inline while some are served through local .js files
        script-src 'self' 'unsafe-inline';  // same here
        connect-src
          *.amazonaws.com   // if backend is deployed to AWS, there is no CSP header - so this really allows AWS backend. If not, this is just ignored (header limits it)
          127.0.0.1:*  // same here - when developing on localhost header is not set, so this allows using 127.0.0.1:* as backend
          'self';  // if backend is deployed via Docker, it is accessible at the same address as frontend
        font-src 'self';
        img-src 'self';
        worker-src 'self';
        manifest-src 'self';  // probably needed for android
    -->
    <meta name="Content-Security-Policy" http-equiv="Content-Security-Policy" content="
      default-src 'none';
      style-src 'self' 'unsafe-inline';
      script-src 'self' 'unsafe-inline';
      connect-src 127.0.0.1:* *.amazonaws.com 'self' wss://localhost:9883 ws://localhost:9883;
      font-src 'self';
      img-src 'self';
      worker-src 'self';
      manifest-src 'self';
    ">
    <title>Grafolean</title>
    <script src="paho-mqtt-min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="root">
      Loading, please wait...
    </div>
  </body>
</html>
